@model List<CORE_BOL.AssetRegisterVM>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";

}<div class="dialog-background" style="display:none" id="img1">
    <div class="dialog-loading-wrapper">
        <span class="dialog-loading-icon"><img src="~/dist/img/loader.gif" style="width: 100%; height: 100%;" /></span>
    </div>
</div>
<link rel="stylesheet" href="~/plugins/sweetalert2/sweetalert2.js">
<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1 class="m-0 text-dark"></h1>
                <!-- HIDDEN FIELDS HERE -->
                <input type="hidden" id="hdnAssetId" value="" />


                <!-- HIDDEN FIELDS HERE END -->
            </div><!-- /.col -->
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a asp-action="Index">Report</a></li>
                    @*<li class="breadcrumb-item active">Asset Register Details</li>*@
                </ol>
            </div><!-- /.col -->
        </div><!-- /.row -->
    </div><!-- /.container-fluid -->
</div>
<!-- /.content-header -->


<div class="card card-info">
    @if (TempData["msg"] != null)
    {
        <div class="alert alert-success alert-dismissible">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <h5><i class="icon fas fa-check"></i> Alert!</h5>
            <p>@TempData["msg"]</p>
        </div>
    }

    <div class="card-header">
        <h3 class="card-title">Revenue Report</h3>
    </div>
    <!-- /.card-header -->
    <div class="card-body">
        <hr />
        <div class="form-group row">
            <div class="input-group d-flex justify-content-center col-5">
                <label class="col-sm-4 col-form-label">Start Date<span style="font-weight: bold; color: red;"></span></label>
                <input id="sdate" type="date" class="form-control col-6" />
            </div>

            <div class="input-group d-flex justify-content-center col-5">
                <label class="col-sm-4 col-form-label">End Date<span style="font-weight: bold; color: red;"></span></label>
                <input id="edate" type="date" class="form-control col-6" />
            </div>

            <div class="input-group-append col-2">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="button" value="Search" class="btn btn-primary" onclick="return Serach();" />
            </div>
        </div>



    </div>

    </div>
<div class="card-body" id="Revenue" style="display:none;">
    <div class="card card-info">
        <div class="card-header">
            <h3 class="card-title">Revenue</h3>
        </div>
    </div>
    <br />
    <div class="form-group row">
        <table class="table table-bordered table-striped" style="width:100%;">
            <thead style="background-color:mediumaquamarine">
                <tr>

                    <th colspan="2" style="text-align:center;"><a style="color: #007bff; cursor: pointer;" onclick="return Revenue();">Revenue</a></th>
                    <th colspan="2" style="text-align:center;"><b id="Totalamount"></b></th>
                </tr>

        </table>
    </div>

    <div class="card-body" id="RevenueDetails" style="display:none;">
        <div class="card card-info">
            <div class="card-header">
                <h3 class="card-title">Revenue Details</h3>
            </div>
        </div>
        <br />
        <div class="form-group row">
            <table class="table table-bordered table-striped" style="width:50%;">
                <thead style="background-color:mediumaquamarine">
                    <tr>

                        <th colspan="2" style="text-align:center;"><a style="color: #007bff; cursor: pointer;" onclick="return PRevenue();">Property Revenue</a></th>
                        <th colspan="2" style="text-align:center;"><b id="pamount"></b></th>
                    </tr>

            </table>

            <table class="table table-bordered table-striped" style="width:50%;">
                <thead style="background-color:mediumaquamarine">
                    <tr>

                        <th colspan="2" style="text-align:center;"><a style="color: #007bff; cursor: pointer;" onclick="return WRevenue();">Water Revenue</a></th>
                        <th colspan="2" style="text-align:center;"><b id="wamount"></b></th>
                    </tr>

            </table>

        </div>
    </div>
</div>



<div class="card card-info" id="WaterHead" style="display: none;">
    <div class="card-header">
        <h3 class="card-title">Water Revenue</h3>
    </div>
    <div class="card-body">

        <div class="form-group row">
            <table  class="table table-bordered table-striped">
                <thead style="background-color:mediumaquamarine">
                    <tr>
                        <th>Sl.No</th>
                        <th>Head</th>
                        <th>Amount</th>

                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="tblwater">
                </tbody>

                <tr>
                    <td></td>
                    <td>total</td>
                    <td><b id="wheadtamount"></b></td>
                    <td></td>

                </tr>
            </table>
          
        </div>

    </div>
</div>

<div class="card card-info" id="PropertyHead" style="display: none;">
    <div class="card-header">
        <h3 class="card-title">Property Revenue</h3>
    </div>
    <div class="card-body">
        <table id="example111" class="table table-bordered table-striped">
            <thead style="background-color:mediumaquamarine">
                <tr>
                    <th>Sl.No</th>
                    <th>Head</th>
                    <th>Amount</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="tblpropertyre">
            </tbody>
            <tr>
                <td></td>
                <td>total</td>
                <td><b id="phtotal"></b></td>
                <td></td>

            </tr>
        </table>
      </div>
</div>


<div class="card card-info" id="WaterDetails" style="display: none;">
    <div class="card-header">
        <h3 class="card-title">Water Details</h3>
    </div>
    <div class="card-body">
        <table id="example111" class="table table-bordered table-striped">
            <thead style="background-color:mediumaquamarine">
                <tr>
                    <th>Sl.No</th>
                    <th>Receipt No</th>
                    <th>Amount</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="tblwaterDetails">
            </tbody>
            <tr>
                <td></td>
                <th>total</th>
               
                <td><b id="wRecepittamount"></b></td>
                <td></td>

            </tr>
        </table>
    </div>
</div>



<div class="card card-info" id="PropertyDetails" style="display: none;">
    <div class="card-header">
        <h3 class="card-title">Property Details</h3>
    </div>
    <div class="card-body">
        <table id="example111" class="table table-bordered table-striped">
            <thead style="background-color:mediumaquamarine">
                <tr>
                    <th>Sl.No</th>
                    <th>Receipt No</th>
                    <th>Amount</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="tblpropertyrecepit">
            </tbody>
            <tr>
                <td></td>
                <td>total</td>
                
                <td><b id="prtotal"></b></td>
                <td></td>

            </tr>
        </table>
    </div>
</div>

<div id="waterreceipt" style="display: none;">
    <div class="card card-info" id="dvPrintw">

        <div class="card-body">
            <div class="form-group row">
                <table style="width: 100%; font-size:12px;">
                    <tr>
                        <td colspan="2"></td>
                        <td colspan="2"></td>
                        <td colspan="2"></td>
                        <td colspan="2"></td>
                        <td colspan="2"></td>
                        <td colspan="2"></td>
                    </tr>

                    <tr>
                        <td>
                            <img src="~/dist/img/tt_logo.gif"
                                 style="width: 100px; height: 100px" />
                        </td>
                        <td style="text-align:center;">
                            <strong><b style="font-size:large;">Thimphu Thromde</b></strong> <br /> <strong><label @*id="lbltransactiontype" value=""*@ /> Payment Recepit </strong>
                        </td>


                        <td style="float:right">
                            <img id="qrDemandNos" style="width: 100px; height: 100px" />
                        </td>
                    </tr>
                    <tr>
                        <td style="float:left;">
                            <b>Consumer No:</b>&nbsp; <label id="idrWconsumer" class="col-form-label" readonly />
                        </td>
                        <td style="text-align:center;">
                        </td>
                        <td style="float:right;">
                            <span>
                                <b>Receipt No:</b>&nbsp;<label id="idrecepitnos" value="" />
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td style="float:left;">
                            <b>Meter No:</b>&nbsp;<label id="idrWmeters" class="col-form-label" readonly />
                        </td>
                        <td style="text-align:center;">
                        </td>
                        <td style="float:right;">
                            <b>Date:</b>&nbsp;<label id="lblDemandDates" value="" />
                        </td>
                    </tr>
                    @*<tr>
                            <td colspan="2">
                                <b> Billing Date:</b>&nbsp;<label id="idbilldate" value="" />
                            </td>

                        </tr>*@
                </table>
                <table style="width: 100%; font-size:12px;">
                    <tr>
                        <td>
                            <b>Address:</b>&nbsp;<label id="idraddresss" class="col-form-label" readonly />
                        </td>

                    </tr>
                 
                </table>

            </div>
            <div class="form-group row">
                <table id="example1" border="1" style=" border-collapse: collapse; font-size:12px;" width="100%">
                    <thead style="background-color:mediumaquamarine">
                        <tr>
                            <th>#</th>
                            <th>Bill For</th>
                            <th>Tax For</th>
                            <th>Penalty Days</th>
                            <th>Penalty Amount</th>
                            <th>Amount</th>


                        </tr>
                    </thead>
                    <tbody id="tblDemands">
                    </tbody>
                    <tr><td></td><td></td><td></td><td align="right"><b>Total :</b></td><td style="text-align:right"><label id="idpamounts" value="" class="col-form-label" readonly /> </td><td style="text-align:right"><label id="idtamounts" value="" class="col-form-label" readonly /> </td></tr>
                    <tr><td></td><td></td><td> </td><td></td><td align="right"><b> Grand Total :</b></td><td style="text-align:right"><label id="idGtamounts" value="" class="col-form-label" readonly /> </td></tr>
                </table>

            </div>
            <table style="font-size: 12px;">
                <tr>
                    <td>
                        <b>Payment:</b>&nbsp;<label id="lblwpayments" class="col-form-label" readonly />
                    </td>
                    @*<td id="lblpayment"></td>*@
                </tr>

            </table>
            <div class="form-group row">
                <table style="width: 100%; font-size:12px;">
                    <tr>
                        <td colspan="2">
                            &nbsp;
                        </td>
                        <td colspan="4">
                        </td>
                        <td colspan="2">
                        </td>
                        <td colspan="2">
                        </td>
                        <td></td>
                        <td></td>
                        <td colspan="4">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            &nbsp;
                        </td>
                        <td colspan="4">
                        </td>
                        <td colspan="2">
                        </td>
                        <td colspan="2">
                        </td>
                        <td></td>
                        <td></td>
                        <td colspan="4">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            &nbsp;
                        </td>
                        <td colspan="4">
                        </td>
                        <td colspan="2">
                        </td>
                        <td colspan="2">
                        </td>
                        <td></td>
                        <td></td>
                        <td colspan="4">
                        </td>
                    </tr>
                    <tr>

                        <td colspan="4" align="right">
                            <b>Collected by:</b>&nbsp;<label id="lblwusers" value="" />
                        </td>
                        <td colspan="4">
                        </td>
                    </tr>
                </table>
        
        </div>
      </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-10">
            <button asp-action="Index" type="button" class="btn btn-primary" onclick="return water();">Ok</button>  &nbsp;  &nbsp;
            <button class="btn btn-warning" onclick="return printPagew();"><i class="fas fa-print"></i>Print</button>
        </div>
    </div>
    <br />
</div>

<div id="divpropertyrecepit" style="display: none;">
    <div class="card card-info" id="dvPrintp">

        <div class="card-body table-responsive">
            <div class="form-group row">
                <table style="width: 100%; font-size:12px;">
                    <tr>
                    </tr>

                    <tr>
                        <td colspan="2">
                            <img src="~/dist/img/tt_logo.gif"
                                 style="width: 100px; height: 100px" />
                        </td>

                        <td colspan="2" align="center">
                            <strong><b style="font-size:15px;">Thimphu Thromde</b></strong> <br /> <strong><label @*id="lblptransactiontype" value=""*@ /> Payment Recepit </strong>
                        </td>
                        <td style="float: right;">
                            <img id="pqrDemandNo" style="width: 100px; height: 100px" />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2"></td>
                        <td colspan="2"></td>
                        <td style="float: right;">
                            <span>
                                <b>Receipt No:</b>&nbsp;<label id="lblprecepitno" value="" />
                            </span>
                        </td>
                    </tr>
                    @*<tr>
                            <td colspan="2">
                            </td>
                            <td colspan="2"></td>
                            <td style="float: right;">
                                <b>Date:</b>&nbsp;<label id="lblpdate" value="" />
                            </td>
                        </tr>*@
                </table>
                <table style="width: 100%; font-size:12px;">
                    <tr>
                        <td>
                            <b>Name:</b>&nbsp; <label id="lblpname" class="col-form-label" readonly />
                        </td>

                        <td>
                            <b>Phone No:</b>&nbsp;<label id="lblpphone" class="col-form-label" readonly />
                        </td>
                        <td style="float: right;">
                            <b>Date:</b>&nbsp;<label id="lblpdate" value="" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>CID:</b>&nbsp;<label id="lblpcid" class="col-form-label" readonly />
                        </td>

                        @*<td>
                                <b>Address:</b>&nbsp;<label id="lblpaddress" class="col-form-label" readonly />
                            </td>*@

                        <td>
                            <b>TTIN:</b>&nbsp;<label id="lblpttin" class="col-form-label" readonly />
                        </td>
                    </tr>
                </table>

            </div>
            <div class="form-group row">
                <table id="example1" border="1" style=" border-collapse: collapse; font-size:12px; " width="100%">
                    <thead style="background-color:mediumaquamarine">
                        <tr>
                            <th>#</th>
                            <th style="text-align:center;">Calendar Year</th>
                            <th>Tax For</th>
                            <th style="text-align:center;">Plot NO</th>
                            <th style="text-align:center;">Thram No</th>
                            <th style="text-align:center;">Address</th>
                            <th style="text-align:center;">Penalty Days</th>
                            <th style="text-align:center;">Penalty Amount</th>
                            <th style="text-align:center;">Amount</th>
                            <th style="text-align:center;">Total Amount</th>

                        </tr>
                    </thead>
                    <tbody id="tblproperty">
                    </tbody>
                    <tr><td></td><td></td><td></td><td></td><td></td><td></td><td align="right"><b>Total :</b></td><td style="text-align:right"><label id="lblpPentamount" value="" class="col-form-label" readonly /> </td><td style="text-align:right"><label id="lblptamount" value="" class="col-form-label" readonly /> </td><td style="text-align:right"><label id="lblpGtamount" value="" class="col-form-label" readonly /> </td></tr>
                    @*<tr><td></td><td></td><td></td><td></td><td align="right"><b>Penalty Amount:</b>(<b id="lblpdays"></b>&nbsp;<b>days</b>)</td><td style="text-align:right"><label id="lblppenalty" value="" class="col-form-label" readonly /> </td></tr>*@
                    @*<tr><td></td><td></td><td></td><td></td><td></td><td></td><td align="right"><b>Grand Total Amount:</b></td><td style="text-align:right"><label id="lblpGtamount" value="" class="col-form-label" readonly /> </td></tr>*@

                </table>

            </div>


            <table style="font-size: 12px;">
                <tr>
                    <td>
                        <b>Payment:</b>&nbsp;<label id="lblppayment" class="col-form-label" readonly />
                    </td>
                    @*<td id="lblpayment"></td>*@
                </tr>

            </table>
            <table style="width: 100%; font-size:12px;">
                <tr>
                    <td colspan="2">
                        &nbsp;
                    </td>
                    <td colspan="4">
                    </td>
                    <td colspan="2">
                    </td>
                    <td colspan="2">
                    </td>
                    <td></td>
                    <td></td>
                    <td colspan="4">
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        &nbsp;
                    </td>
                    <td colspan="4">
                    </td>
                    <td colspan="2">
                    </td>
                    <td colspan="2">
                    </td>
                    <td></td>
                    <td></td>
                    <td colspan="4">
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        &nbsp;
                    </td>
                    <td colspan="4">
                    </td>
                    <td colspan="2">
                    </td>
                    <td colspan="2">
                    </td>
                    <td></td>
                    <td></td>
                    <td colspan="4">
                    </td>
                </tr>
                <tr>

                    <td colspan="4" align="right">
                        <b>Collected by:</b>&nbsp;<label id="lblpuser" value="" />
                    </td>
                    <td colspan="4">
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-10">
            <button type="button" class="btn btn-primary" onclick="return okp();">Ok</button>  &nbsp;  &nbsp;
            <button class="btn btn-warning" onclick="return printPagep();"><i class="fas fa-print"></i>Print</button>
        </div>
    </div>
    <br />
</div>
<script src="~/plugins/jquery/jquery.min.js"></script>

<script>

    function Serach() {
        $('#Revenue').show();
        $('#img1').show();


        var today = new Date($("#sdate").val());
        var date = today.getFullYear() + '' + ("0" + (today.getMonth() + 1)).slice(-2) + '' + ("0" + today.getDate()).slice(-2)
        let text1 = date.toString();
        var sdate = text1;

        var today1 = new Date($("#edate").val());
        var date1 = today1.getFullYear() + '' + ("0" + (today1.getMonth() + 1)).slice(-2) + '' + ("0" + today1.getDate()).slice(-2)
        let text = date1.toString();
        var edate = text;


            $.ajax({
            type: "GET",
            url: '@Url.Action("GetRevenue", "Report")',
            data: {
                StartDate: sdate,
                EndDate: edate

            },
            dataType: "json",
                success: function (data) {
                    $('#img1').hide();
                    console.log(data);
                    $('#Totalamount').html('');
                    if (data.length > 0) {

                        $.each(data, function (key, value) {
                            $('#Totalamount').append(
                                "  Nu.  " + value.amount.toFixed(2) + ""
                            );

                        });

                    }
                    else {
                        $('#img1').hide();
                      alert('error');
                }

            },

            error: function () {
                alert('error');
                $('#img1').hide();
            }
        });
    }

    function Revenue() {
        $('#RevenueDetails').show();
        $('#img1').show();
        $('html,body').animate({
            scrollTop: $("#RevenueDetails").offset().top
        }, 'slow');

        var today = new Date($("#sdate").val());
        var date = today.getFullYear() + '' + ("0" + (today.getMonth() + 1)).slice(-2) + '' + ("0" + today.getDate()).slice(-2)
        let text1 = date.toString();
        var sdate = text1;

        var today1 = new Date($("#edate").val());
        var date1 = today1.getFullYear() + '' + ("0" + (today1.getMonth() + 1)).slice(-2) + '' + ("0" + today1.getDate()).slice(-2)
        let text = date1.toString();
        var edate = text;

         $.ajax({
            type: "GET",
            url: '@Url.Action("GetWaterRevenueDetails", "Report")',
            data: {
                StartDate: sdate,
                EndDate: edate

            },
            dataType: "json",
                success: function (data) {

                    console.log(data);
                    $('#wamount').html('');
                    if (data.length > 0) {
                        $('#img1').hide();

                    $.each(data, function (key, value) {

                        $('#wamount').append(
                            "  Nu.  " + value.amount.toFixed(2) + ""
                        );

                    });



                    }
                    else {
                        $('#img1').hide();
                      alert('error');
                }

            },

             error: function () {
                 $('#img1').hide();
                alert('error');
            }
         });

           $.ajax({
            type: "GET",
            url: '@Url.Action("GetPropertyRevenueDetails", "Report")',
            data: {
                StartDate: sdate,
                EndDate: edate

            },
            dataType: "json",
                success: function (data) {

                    console.log(data);
                    $('#pamount').html('');
                    if (data.length > 0) {
                        $('#img1').hide();

                    $.each(data, function (key, value) {

                        $('#pamount').append(
                            "  Nu.  " + value.amount.toFixed(2) + ""
                        );

                    });



                    }
                    else {
                        $('#img1').hide();
                      alert('error');
                }

            },

               error: function () {
                   $('#img1').hide();
                alert('error');
            }
        });
    }


    function PRevenue() {
        $('#PropertyHead').show();
        $('#WaterHead').hide();
        $('#WaterDetails').hide();
        $('#waterreceipt').hide();
        $('html,body').animate({
            scrollTop: $("#PropertyHead").offset().top
        }, 'slow');

         $('#img1').show();

        var today = new Date($("#sdate").val());
        var date = today.getFullYear() + '' + ("0" + (today.getMonth() + 1)).slice(-2) + '' + ("0" + today.getDate()).slice(-2)
        let text1 = date.toString();
        var sdate = text1;

        var today1 = new Date($("#edate").val());
        var date1 = today1.getFullYear() + '' + ("0" + (today1.getMonth() + 1)).slice(-2) + '' + ("0" + today1.getDate()).slice(-2)
        let text = date1.toString();
        var edate = text;

        $.ajax({
            type: "GET",
            url: '@Url.Action("GetPropertyheadwiseDetails", "Report")',
            data: {
                StartDate: sdate,
                EndDate: edate
            },
            success: function (data) {
                $('#img1').hide();
                if (data.length > 0) {

                    console.log();
                    var TA = 0;
                    $.each(data, function (key, value) {
                        TA += value.amount;
                        $('#tblpropertyre').append(
                            '<tr>'
                            + '<td>' + (key + 1) + '</td>'
                            + '<td>' + value.minorHeadName + '</td>'
                            + '<td>' + value.amount + '</td>'
                            + '<td>'
                            + '<a style = "color: #007bff; cursor: pointer;" onclick = "return PReport();" >DetailView</a >'
                            + '</td>'

                            + '</tr>');

                    });

                    $("#phtotal").html(TA.toFixed(2));
    }

                  else {
                     $('#img1').hide();
                    $('#tblpropertyre').append(
                         '<tr><td colspan="4" style="color: red;">No record found!</td></tr>');
                     swal({
                         title: 'No data found!!!!',
                         type: 'error',
                         confirmButtonText: 'OK'
                     });

                 }
             },
              error: function () {
                  $('#img1').hide();
                 alert('Error');
             }

         });
    }
    function WRevenue() {
        $('#WaterHead').show();
        $('#PropertyHead').hide();
        $('#PropertyDetails').hide();
        $('#propertyreceipt').hide();
        $('#img1').show();
        $('html,body').animate({
            scrollTop: $("#WaterHead").offset().top
        }, 'slow');

        var today = new Date($("#sdate").val());
        var date = today.getFullYear() + '' + ("0" + (today.getMonth() + 1)).slice(-2) + '' + ("0" + today.getDate()).slice(-2)
        let text1 = date.toString();
        var sdate = text1;

        var today1 = new Date($("#edate").val());
        var date1 = today1.getFullYear() + '' + ("0" + (today1.getMonth() + 1)).slice(-2) + '' + ("0" + today1.getDate()).slice(-2)
        let text = date1.toString();
        var edate = text;

        $.ajax({
            type: "GET",
            url: '@Url.Action("GetHeadWaterRevenueDetails", "Report")',
            data: {
                StartDate: sdate,
                EndDate: edate
            },
            success: function (data) {

                if (data.length > 0) {
                    $('#img1').hide();
                    console.log();
                    var TA = 0;
                    $.each(data, function (key, value) {
                        TA += value.amount;
                        $('#tblwater').append(
                            '<tr>'
                            + '<td>' + (key + 1) + '</td>'
                            + '<td>' + value.minorHeadName + '</td>'
                            + '<td>' + value.amount + '</td>'
                            + '<td>'
                            + '<a style = "color: #007bff; cursor: pointer;" onclick = "return WReport();" >DetailView</a >'
                            + '</td>'

                            + '</tr>');

                    });

        $("#wheadtamount").html(TA.toFixed(2));
    }

                  else {
                     $('#img1').hide();
                     $('#tblwater').append(
                         '<tr><td colspan="4" style="color: red;">No record found!</td></tr>');
                     swal({
                         title: 'No data found!!!!',
                         type: 'error',
                         confirmButtonText: 'OK'
                     });

                 }
             },
              error: function () {
                  $('#img1').hide();
                 alert('Error');
             }

         });
    }

    function PReport() {
        $('#PropertyDetails').show();
        $('#WaterDetails').hide();
        $('#waterreceipt').hide();
      
         $('#img1').show();
        $('html,body').animate({
            scrollTop: $("#PropertyDetails").offset().top
        }, 'slow');

        var today = new Date($("#sdate").val());
        var date = today.getFullYear() + '' + ("0" + (today.getMonth() + 1)).slice(-2) + '' + ("0" + today.getDate()).slice(-2)
        let text1 = date.toString();
        var sdate = text1;

        var today1 = new Date($("#edate").val());
        var date1 = today1.getFullYear() + '' + ("0" + (today1.getMonth() + 1)).slice(-2) + '' + ("0" + today1.getDate()).slice(-2)
        let text = date1.toString();
        var edate = text;
         $.ajax({
                type: "GET",
                url: '@Url.Action("GetRevenuepropertyeceiptwise", "Report")',
                data: {
                    StartDate: sdate,
                    EndDate: edate
                },
             success: function (data) {
                 $('#img1').hide();
                 console.log();
                 if (data.length > 0) {

                     var TA = 0;


                     $.each(data, function (key, value) {
                         TA += value.amount;
                         $('#tblpropertyrecepit').append(
                             '<tr>'
                             + '<td>' + (key + 1) + '</td>'
                             + '<td>' + value.receiptNo + '</td>'
                             + '<td>' + value.amount + '</td>'
                             + '<td>'
                             + '<a style = "color: #007bff; cursor: pointer;" onclick = "return PReceipt(' + value.receiptId + ');" >DetailView</a >'
                             + '</td>'

                             + '</tr>');

                     });

                     //GTA = parseFloat(TA) + parseFloat(TPA);
                     $("#prtotal").html(TA.toFixed(2));
                 } else {
                     $('#img1').hide();
                     $('#tblpropertyrecepit').append(
                         '<tr><td colspan="4" style="color: red;">No record found!</td></tr>');
                     swal({
                         title: 'No data found!!!!',
                         type: 'error',
                         confirmButtonText: 'OK'
                     });

                 }
             },
             error: function () {
                 $('#img1').hide();
                 alert('Error');
             }

         });
    }
    function WReport() {
        $('#WaterDetails').show();
        $('#PropertyDetails').hide();
        $('#propertyreceipt').hide();
        $('#img1').show();
        $('html,body').animate({
            scrollTop: $("#WaterDetails").offset().top
        }, 'slow');
        $('#img1').show();

        var today = new Date($("#sdate").val());
        var date = today.getFullYear() + '' + ("0" + (today.getMonth() + 1)).slice(-2) + '' + ("0" + today.getDate()).slice(-2)
        let text1 = date.toString();
        var sdate = text1;

        var today1 = new Date($("#edate").val());
        var date1 = today1.getFullYear() + '' + ("0" + (today1.getMonth() + 1)).slice(-2) + '' + ("0" + today1.getDate()).slice(-2)
        let text = date1.toString();
        var edate = text;
         $.ajax({
                type: "GET",
                url: '@Url.Action("GetReceiptwiseWaterRevenueDetails", "Report")',
                data: {
                    StartDate: sdate,
                    EndDate: edate
                },
             success: function (data) {
                 $('#img1').hide();
                 console.log();
                 if (data.length > 0) {


                     var TA = 0;


                     $.each(data, function (key, value) {
                         TA += value.amount;
                         $('#tblwaterDetails').append(
                             '<tr>'
                             + '<td>' + (key + 1) + '</td>'
                             + '<td>' + value.receiptNo + '</td>'
                             + '<td>' + value.amount + '</td>'
                             + '<td>'
                             + '<a style = "color: #007bff; cursor: pointer;" onclick = "return WReceipt(' + value.receiptId + ');" >DetailView</a >'
                             + '</td>'

                             + '</tr>');

                     });

                     //GTA = parseFloat(TA) + parseFloat(TPA);
                     $("#wRecepittamount").html(TA.toFixed(2));
                 } else {
                     $('#img1').hide();
                     $('#tblwaterDetails').append(
                         '<tr><td colspan="4" style="color: red;">No record found!</td></tr>');
                     swal({
                         title: 'No data found!!!!',
                         type: 'error',
                         confirmButtonText: 'OK'
                     });

                 }
             },
             error: function () {
                 $('#img1').hide();
                 alert('Error');
             }

         });
    }

    function PReceipt(ReceiptId) {
      
        $('#propertyreceipt').show();
        $('#waterreceipt').hide();
     
        $('#img1').show();
      
       

        $.ajax({
                type: "GET",
                url: '@Url.Action("fetchreceiptuser", "Report")',
                data: {
                    RecepitId: ReceiptId
                },
            success: function (data) {
                console.log(data);
                $('#img1').hide();
                     $("#lblpuser").html(data[0].creatorname);
                     $('#img').hide();
             },
            error: function () {
                    $('#img').hide();
                    alert('Error occured');
     }
    });
$.ajax({
                type: "GET",
                url: '@Url.Action("PrintPaymentModes", "Report")',
                data: {
                    ReceiptId: ReceiptId
                },
    success: function (data) {
        $("#lblpdays").html(data[0].penaltyDays);
                $("#lblpGtamount").html(data[0].amount);
                $("#lblppenalty").html(data[0].penaltyAmount.toFixed(2));
        console.log(data);
        $('#lblppayment').html('');
                if (data.length > 0) {
                    $('#img1').hide();
                    $.each(data, function (key, value) {
                        var pmode = value.paymentmode;


                        if (pmode == 'Cash') {

                            $('#lblppayment').append(
                                "" + pmode + "  Nu.  " + value.amount.toFixed(2) + ","
                        );
                }
                else {
                            $('#lblppayment').append(
                                "" + pmode + " Bank Name: " + value.bank + " Mode no:   " + value.paymentModeNo + " Nu. " + value.amount.toFixed(2)
                        );
                }
             });

                    $('#img').hide();


                    }


                },
                    error: function () {
                    $('#img').hide();
                    alert('Error occured');
                    }
});
               $.ajax({
                type: "GET",
                url: '@Url.Action("PrintPaymentreceipt", "Report")',
                data: {
                    id: ReceiptId,
                },
            success: function (data) {
                $('#img1').hide();
                $('#divpropertyrecepit').show();
                    console.log(data);
                    $('#tblproperty').empty();
                if (data.length > 0) {


                    $('#pqrDemandNo').attr('src', `data:image/png;base64,${data[0].qrImage}`);
                    $("#lblprecepitno").html(data[0].receipt);
                    var today = new Date(data[0].createdOn);
                    var date = ("0" + today.getDate()).slice(-2) + '/' + ("0" + (today.getMonth() + 1)).slice(-2) + '/' + today.getFullYear()
                    $("#lblpdate").html(date);

                    var LandDetailId = data[0].landDetailId;
                    var Cid = data[0].cid;
                    var Ttin = data[0].ttin;
                    var FullName = data[0].fullName;
                    var PhoneNo = data[0].phoneNo;

                    $("#hdnlandId").html(data[0].landDetailId);
                    //$("#lblpplotno").html(data[0].plotNo);
                    //$("#lblpThramno").html(data[0].thramNo);



                    $("#lblpPentamount").html(data[0].totalPenaltyAmount);
                    $("#lblptamount").html(data[0].totalAmount);
                    var IsApportioned = data[0].isApportioned;
                    if (IsApportioned == false) {
                        $.ajax({
                            type: "GET",
                            url: '@Url.Action("PrintNames", "Ledgers")',
                            data: {
                                id: LandDetailId
                            },
                            success: function (data) {
                                console.log(data);
                                $('#lblppayment').html('');
                                if (data.length > 0) {
                                    $('#img1').hide();
                                    $.each(data, function (key, value) {
                                        $('#lblpname').append(
                                            "" + value.firstName + ","
                                        );
                                        $('#lblpcid').append(
                                            "" + value.cid + ","
                                        );
                                        $('#lblpttin').append(
                                            "" + value.ttin + ","
                                        );
                                        $('#lblpphone').append(
                                            "" + value.phoneNo + ","
                                        );

                                    });

                                    $('#img').hide();


                                }


                            },
                            error: function () {
                                $('#img').hide();
                                alert('Error occured');
                            }
                        });
                    }
                    else {
                        $("#lblpcid").html(Cid);
                        /* $("#lblpaddress").html(data[0].caddress);*/
                        $("#lblpttin").html(Ttin);
                        $("#lblpname").html(FullName);
                        $("#lblpphone").html(PhoneNo);
                    }


                    $.each(data, function (key, value) {
                        var ttlamt = 0; var pdays = 0;
                        ttlamt = value.grandTotalAmount + value.penaltyAmount;

                        if (value.penaltyDays < 0) {
                            pdays = 0;
                        }
                        else {
                            pdays = value.penaltyDays;
                        }
                            $('#tblproperty').append(
                                '<tr>' + '<td>' + (key + 1) + '</td>'
                                + '<td style="text-align:center;">' + value.calendarYear + '</td>'
                                + '<td>' + value.taxName + '</td>'
                                + '<td style="text-align:center;">' + value.plotNo + '</td>'
                                + '<td style="text-align:center;">' + value.thramNo + '</td>'
                                + '<td style="text-align:center;">' + value.address + '</td>'
                                + '<td style="text-align:center;" >' + pdays + '</td>'
                                + '<td style="text-align:right">' + value.penaltyAmount + '</td>'
                                + '<td style="text-align:right">' + value.grandTotalAmount + '</td>'
                                + '<td style="text-align:right">' + ttlamt.toFixed(2) + '</td>'


                                + '</tr>');
                        });
                        $('#img').hide();
                    }
                    else {
                        $('#img').hide();

                    $('#tblproperty').append(
                            '<tr><td colspan="7" style="color: red;">No record found!</td></tr>');
                    }

                },
                    error: function () {
                    $('#img').hide();
                    alert('Error occured');
                    }
                });

    }
    function WReceipt(recepitId) {
        $('#waterreceipt').show();
        $('#propertyreceipt').hide();

        $('html,body').animate({
            scrollTop: $("#waterreceipt").offset().top
        }, 'slow');

        $('#img1').show();

            $.ajax({
                type: "GET",
                url: '@Url.Action("fetchDreceiptuser", "Report")',
                data: {
                    ReceiptId: recepitId
                },
                success: function (data) {
                
            console.log(data);
                     $("#lblwusers").html(data[0].creatorname);
                     $('#img').hide();
             },
            error: function () {
                    $('#img').hide();
                    alert('Error occured');
     }
 });

        $.ajax({
                type: "GET",
                url: '@Url.Action("PrintDuplicatePaymentModes", "Report")',
                data: {
                    ReceiptId: recepitId
                },
        success: function (data) {

            console.log(data);
            if (data.length > 0) {
                $('#img1').hide();
                $('#lblwpayments').html('');

                     $('#lblwpayment').empty();
                    $.each(data, function (key, value) {
                        var pmode = value.paymentmode;
                            if (pmode == 'Cash') {
                                $('#lblwpayments').append(
                                ""+ pmode + "  Nu.  " + value.amount + ","
                        );
                }
                else {
                            $('#lblwpayments').append(
                                "" + pmode + " Nu. " + value.amount + " Bank Name: " + value.bank + " Mode No:   " + value.paymentModeNo
                        );
                }
             });
                     $('#img').hide();
                     }
                    },
                    error: function () {
                    $('#img').hide();
                    alert('Error occured');
                    }
        });

          $.ajax({
                type: "GET",
                url: '@Url.Action("fetchledgerdata", "Report")',
                data: {
                    RecepitId: parseInt(recepitId)
                },
             success: function (data) {
                 $('#img1').hide();
                 $('#tblDemands').empty();
                 var today = new Date(data[0].createdOn);
                 var date = ("0" + today.getDate()).slice(-2) + '/' + ("0" + (today.getMonth() + 1)).slice(-2) + '/' + today.getFullYear()
                 $("#lblDemandDates").html(date);



                 $("#idraddresss").html(data[0].caddress);

                 $("#idrecepitnos").html(data[0].receipt);
                 $("#idtamounts").html(data[0].netAmount);
                 $("#idpamounts").html(data[0].totalPenaltyAmount);

                 $("#idrWconsumer").html(data[0].consumerNo);
                 $("#idrWmeters").html(data[0].waterMeterNO);

                 $('#qrDemandNos').attr('src', `data:image/png;base64,${data[0].qrImage}`);
                 if (data.length > 0) {
                     $('#img1').hide();

                     var TA = 0;
                     var TPA = 0;
                     var GTA = 0;
                     $.each(data, function (key, value) {
                         TA = value.netAmount;
                         TPA = value.totalPenaltyAmount;
                     $('#tblDemands').append(
                         '<tr>'
                         + '<td>' + (key + 1) + '</td>'
                         + '<td>' + value.billmonth + '</td>'
                         + '<td>' + value.taxName + '</td>'

                         + '<td>' + value.penaltyDays + '</td>'
                         + '<td style="text-align:right">' + value.penaltyAmount + '</td>'
                         + '<td style="text-align:right">' + value.totalAmount.toFixed(2) + '</td>'

                         + '</tr>');



                     });

                     GTA = parseFloat(TA) + parseFloat(TPA);
                     $("#idGtamounts").html(GTA.toFixed(2));
                 } else {
                     $('#tbl_body').append(
                         '<tr><td colspan="4" style="color: red;">No record found!</td></tr>');
                     swal({
                         title: 'No data found!!!!',
                         type: 'error',
                         confirmButtonText: 'OK'
                     });

                 }
             },
             error: function () {
                 alert('Payment not made!!! Make a Payment first');
             }

         });
    }

    function printPagew() {
        var dataToPrint = document.getElementById("dvPrintw");
        newWin = window.open("");
        newWin.document.write(dataToPrint.outerHTML);
        newWin.print();
        newWin.close();
    }
    function printPagep() {
        var dataToPrint = document.getElementById("dvPrintp");
        newWin = window.open("");
        newWin.document.write(dataToPrint.outerHTML);
        newWin.print();
        newWin.close();
    }
</script>