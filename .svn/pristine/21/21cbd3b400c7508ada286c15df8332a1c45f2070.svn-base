@using CORE_BOL
@model WaterMeterReadingModel
@{
    ViewData["Title"] = "CheckConsumerNoSequence";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Content Header (Page header) -->
<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1 class="m-0 text-dark"></h1>
            </div><!-- /.col -->
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item">Check ConsumerNo Sequence</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<!--Search-->
<div class="card card-info">
    <div class="card-header">
        <h3 class="card-title">Check ConsumerNo Sequence</h3>
    </div>
    <div class="card-body">
        <div class="row d-flex ">
            <div class="input-group  col-3">
                <label class="col-sm-4 col-form-label">Zone</label>
                <select id="IDzone" class="form-control col-sm-8 select2bs4"
                        asp-items="@(new SelectList (@ViewBag.Zone,"Value","Text")) " value="0"></select>
            </div>
            <div class="input-group col-3 float-left">
                <button class="btn btn-primary" onclick="return SearchCnoSequence();">Search</button>
            </div>
        </div>
    </div>
</div>

<!--Details-->
<div class="card card-info" id="tbl_Details" style="display: none;">
    <div class="card-header">
        <h3 class="card-title">ConsumerNo Details</h3>
    </div>

    <div class="card-body">
        <input type="hidden" id="bfsTransactionDetailId" />
        <table id="example1" class="table table-bordered table-striped">
            <thead style="background-color:mediumaquamarine">

                <tr>
                    <th>Sl No</th>
                    <th>Consumer No</th>
                    <th>Meter No</th>
                    <th>Billing Address</th>
                    @*<th>Zone Name</th>*@
                </tr>
            </thead>
            <tbody id="tbl_body">
            </tbody>
        </table>
    </div>
</div>




<script>

    function SearchCnoSequence() {

        var zonename = $('#IDzone').val();

            $.ajax({
                type: "GET",
                url: '@Url.Action("SearchCnoSequence", "WaterMeterReadings")',
                data: {
                    zone: zonename
                },
                dataType: "json",
                success: function (data) {
                    $('#tbl_body').empty();
                    if (data.length > 0) {
                        $.each(data, function (key, value) {
                            $('#tbl_Details').show(1000);

                            $('#tbl_body').append(
                                '<tr>'
                                + '<td>' + (key + 1) + '</td>'
                                + '<td>' + value.consumerNo + '</td>'
                                + '<td>' + value.waterMeterNo + '</td>'
                                + '<td>' + value.billingAddress + '</td>'
                                /*+ '<td>' + value.zoneName + '</td>'*/
                                + '</tr>');
                        });
                    } else {
                        $('#tbl_body').append(
                            '<tr><td colspan="4" style="color: red;">No record found!</td></tr>');
                        swal({
                            title: 'Please Enter valid Value!',
                            type: 'error',
                            confirmButtonText: 'OK'
                        });
                    }

                },

            });
    }

</script>