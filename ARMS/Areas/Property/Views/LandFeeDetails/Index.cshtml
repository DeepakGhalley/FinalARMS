@using CORE_BOL
@model LandFeeDetailVM
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="dialog-background" style="display:none" id="img">
    <div class="dialog-loading-wrapper">
        <span class="dialog-loading-icon"><img src="~/dist/img/loader.gif" style="width: 100px; height: 100px;" /></span>
    </div>
</div>


<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1 class="m-0 text-dark"></h1>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item active">Land Fee Details</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<div class="card card-info">
    @if (TempData["msg"] != null)
    {
        <div class="alert alert-danger alert-dismissible">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <h5><i class="icon fas fa-ban"></i> Alert!</h5>
            <p>@TempData["msg"]</p>
        </div>
    }
    <div class="card-header">
        <h3 class="card-title">Search Details</h3>
    </div>
    <div class="card-body">

        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        <div class="form-group row">
            <div class="input-group d-flex justify-content-center col-5">
                <label class="col-sm-4 col-form-label">TTIN:</label>
                <input id="Ttin" class="form-control col-6" />
            </div>
            <div class="input-group d-flex justify-content-center col-5">
                <label class="col-sm-4 col-form-label">CID:</label>
                <input id="Cid" class="form-control col-6" />
            </div>
        </div>
        <div class="form-group row">
            <div class="input-group d-flex justify-content-center col-5">
                <label class="col-sm-4 col-form-label">Plot No:</label>
                <input id="Plotno" class="form-control col-6" />
            </div>
            <div class="input-group d-flex justify-content-center col-5">
                <label class="col-sm-4 col-form-label">Thram No:</label>
                <input id="Thramno" class="form-control col-6" />
            </div>
            <div class="input-group-append col-2">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button class="btn btn-primary" onclick="return SearchDetails();">Search</button>
            </div>
        </div>
    </div>
</div>

<!--LandDetails-->
<div class="card card-info" id="tbl_landetails" style="display: none;">
    <div class="card-header">
        <h3 class="card-title">Land OwnerShip Details</h3>
    </div>

    <div class="card-body">
        <table class="table table-bordered table-striped">
            <thead style="background-color:mediumaquamarine">

                <tr>
                    <th>Sl No</th>
                    <th>TTIN</th>
                    <th>CID</th>
                    <th>Name</th>
                    <th>Plot No</th>
                    <th>Thram No</th>
                    <th> Demand Recepit</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="tbl_body">
            </tbody>
        </table>
    </div>
</div>


<div class="card card-info" id="divtax" style="display: none;">
    <div class="card-header">
        <h3 class="card-title">Land OwnerShip Details</h3>
    </div>

    <div class="card-body">
        <table class="table table-bordered table-striped">
            <thead style="background-color:mediumaquamarine">

                <tr>
                    <th>Sl No</th>
                    <th>Demand No</th>
                    <th>Tax Name</th>
                    <th>amount</th>

                    <th>Action</th>

                </tr>
            </thead>
            <tbody id="tbltax">
            </tbody>
        </table>
    </div>
</div>

<div class="card card-info" id="SavingFee" style="display: none;">
    <div class="card-header">
        <h3 class="card-title">Land Fee Details</h3>
    </div>

    <div class="card-body">

        <hr />


        <input id="hdnLandownershipId" hidden />
        <input id="hdnTaxpayerId" hidden />
        <input id="hdnLandDetailid"  hidden/>


        <div class="row">
            <label class="col-sm-2 col-form-label">Land Service Type</label>
            <div class="col-sm-4">
                <select class="form-control select2" id="LandServiceTypeId" asp-items="@(new SelectList(ViewBag.LandServiceType, "Value", "Text"))" onchange="myFunction()"></select>
            </div>

        </div>
        <br />
     

        <div style="display:none;" id="no">

            <div class="row">
                <label class="col-sm-2 col-form-label">Scrutiny Fee Amount</label>
                <div class="col-sm-4">
                    <input id="lblsfamount" class="form-control" />
                </div>
            </div>
                <br />
                <div class="row">
                    <label class="col-sm-2 col-form-label">Service and Amenities fee Amount</label>
                    <div class="col-sm-4">
                        <input id="lblsaamount" class="form-control" />
                    </div>

                </div>
            
            <div class="form-group row">
                <label class="col-sm-2 col-form-label"></label>
                <div class="col-sm-4">
                    <button type="button" class="btn btn-primary" onclick="Savemajor();">Save</button>
                    <button type="reset" id="btnCancel" class="btn btn-warning" onclick="CancelRD();">Cancel</button>
                </div>
            </div>

        </div>
        <div style="display:none;" id="yes">

            <div class="row">
                <label class="col-sm-2 col-form-label"> Amount</label>
                <div class="col-sm-4">
                    <input id="lblamount" class="form-control" />
                </div>

            </div>
            <br />
            <div class="form-group row">
                <label class="col-sm-2 col-form-label"></label>
                <div class="col-sm-4">
                    <button type="button" class="btn btn-primary" onclick="Save();">Save</button>
                    <button type="reset" id="btnCancel" class="btn btn-warning" onclick="CancelRD();">Cancel</button>
                </div>
            </div>



        </div>

    </div>
</div>




<div class="card card-info" id="demandpage" style="display:none;">
    <div class="card-body" id="printdemandpage">

        <div class="form-group row">

            <table style="width: 100%; font-size:12px;">
                <tr>
                    <td colspan="2">
                        <img src="~/dist/img/tt_logo.gif"
                             style="width: 100px; height: 100px" />
                    </td>

                    <td colspan="2" align="center">
                        <strong><b style="font-size:15px;">Thimphu Thromde</b></strong> <br /> <strong><label @*id="lblptransactiontype" value=""*@ /> Demand Recepit </strong>
                    </td>

                    <td style="float: right;">
                        <img id="qrDemandNo" style="width: 100px; height: 100px" />
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                    </td>

                    <td colspan="2">
                    </td>

                    <td style="float: right;">
                        <b>Demand Date:</b>&nbsp;<label id="demanddate" value="" />
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                    </td>
                    <td colspan="2">
                    </td>
                    <td style="float: right;">
                        <b>Invoice No:</b>&nbsp;<label id="idinvoiceno" value="" />

                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <b>TTIN:</b>&nbsp; <label id="lblttin" class="col-form-label" readonly />
                    </td>

                    <td colspan="2">
                        <b>CID:</b>&nbsp; <label id="lblcid" class="col-form-label" readonly />
                    </td>


                    <td colspan="4">
                        <b>Name:</b>&nbsp;<label id="lblname" value="" />
                    </td>


                </tr>


                <tr>
                    <td colspan="2">
                        <b>Mobile No:</b>&nbsp;<label id="lblmobile" class="col-form-label" readonly />
                    </td>
                    <td colspan="2">
                        <b>  Plot No:</b>&nbsp;<label id="lblplotno" class="col-form-label" readonly />
                    </td>

                    <td colspan="4">
                        <b>Thram No:</b>&nbsp; <label id="lblthramno" class="col-form-label" readonly />
                    </td>

                </tr>


                <tr>
                </tr>
            </table>
        </div>
        <br />
        <div class="form-group row">
            <table id="example1" border="1" style=" border-collapse: collapse; font-size:12px;" width="100%">
                <thead style="background-color:mediumaquamarine">
                    <tr>
                        <th>#</th>
                        <th>Tax For</th>

                        <th style="text-align:center;">Amount</th>
                    </tr>
                </thead>
                <tbody id="tblDemand">
                </tbody>
                @*<tr><td></td><td align="right"><b>Total Amount:</b></td><td><label id="lblTotalDemandAmount" value="" class="col-form-label" readonly /> </td></tr>*@
            </table>
        </div>
        <div class="form-group row">
            <table style="width: 100%; font-size:12px;">


                <tr>
                    <td colspan="2">
                        &nbsp;
                    </td>
                    <td colspan="4">
                    </td>
                    <td colspan="2">
                    </td>
                    <td colspan="2">
                    </td>
                    <td></td>
                    <td></td>
                    <td colspan="4">
                    </td>
                </tr>
                <tr>

                    <td colspan="4" align="right">
                        <b>Generated by:</b>&nbsp;<label id="lbluser" value="" />
                    </td>
                    <td colspan="4">
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-10">
            <button type="button" class="btn btn-primary" onclick="return ok();">Ok</button>  &nbsp;  &nbsp;
            <button class="btn btn-warning" onclick="return printPage();"><i class="fas fa-print"></i>Print</button>
        </div>
    </div>
</div>

@***********************************************************Land Transaction Fee Recepit**********************************************************@
<div id="divlandtransactionrecepit" style="display: none;">
    <div class="card card-info" id="dvPrintl">

        <div class="card-body">
            <table style="width: 100%; font-size:12px;">
                <tr>
                </tr>

                <tr>
                    <td>
                        <img src="~/dist/img/tt_logo.gif"
                             style="width: 100px; height: 100px" />
                    </td>


                    <td align="center">
                        <strong><b style="font-size:15px;">Thimphu Thromde</b></strong> <br /> <strong><label @*id="lblptransactiontype" value=""*@ /> Payment Recepit </strong>
                    </td>


                    <td style="float: right;">
                        <img id="lqrDemandNo" style="width: 100px; height: 100px" />
                    </td>
                </tr>
                <tr>

                    <td></td>
                    <td></td>
                    <td style="float: right;">

                        <b>Receipt No:</b>&nbsp;<label id="lbllrecepitno" value="" />

                    </td>
                </tr>
                <tr>
                    <td> </td>
                    <td></td>
                    <td style="float: right;">
                        <b>Date:</b>&nbsp;<label id="lblldate" value="" />
                    </td>
                </tr>

            </table>
            <table style="width: 100%; font-size:12px;">

                <tr>
                    <td>
                        <b>TTIN:</b>&nbsp; <label id="lblllttin" class="col-form-label" readonly />
                    </td>
                    <td>
                        <b>CID:</b>&nbsp; <label id="lblllcid" class="col-form-label" readonly />
                    </td>
                    <td>
                        <b>Name:</b>&nbsp; <label id="lbllname" class="col-form-label" readonly />
                    </td>


                </tr>
                <tr>

                    <td>
                        <b>Address:</b>&nbsp;<label id="lblladdress" class="col-form-label" readonly />

                    </td>
                    <td>
                        <b>Plot No:</b>&nbsp;<label id="lbllplotno" class="col-form-label" readonly />

                    </td>
                    <td>
                        <b>Thram NO:</b>
                        <label id="lbllthramno" class="col-form-label" readonly />
                    </td>
                </tr>

            </table>

        </div>
        <div class="form-group row">
            <table id="example1" border="1" style=" border-collapse: collapse; font-size:12px; " width="100%">
                <thead style="background-color:mediumaquamarine">
                    <tr>
                        <th>#</th>
                        <th>Tax </th>

                        <th>Amount</th>


                    </tr>
                </thead>
                <tbody id="tbllandtransaction">
                </tbody>
                <tr><td></td><td align="right"><b>Total Amount:</b></td><td style="text-align:right;"><label id="lblltamount" value="" class="col-form-label" readonly /> </td></tr>
            </table>

        </div>
       
        <div class="form-group row">
            <table style="width: 100%; font-size:12px;">
                <tr>
                    <td colspan="2">
                        &nbsp;
                    </td>
                    <td colspan="4">
                    </td>
                    <td colspan="2">
                    </td>
                    <td colspan="2">
                    </td>
                    <td></td>
                    <td></td>
                    <td colspan="4">
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        &nbsp;
                    </td>
                    <td colspan="4">
                    </td>
                    <td colspan="2">
                    </td>
                    <td colspan="2">
                    </td>
                    <td></td>
                    <td></td>
                    <td colspan="4">
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        &nbsp;
                    </td>
                    <td colspan="4">
                    </td>
                    <td colspan="2">
                    </td>
                    <td colspan="2">
                    </td>
                    <td></td>
                    <td></td>
                    <td colspan="4">
                    </td>
                </tr>
                <tr>

                    <td colspan="4" align="right">
                        <b>Collected by:</b>&nbsp;<label id="lblluser" value="" />
                    </td>
                    <td colspan="4">
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-10">
            <button type="button" class="btn btn-primary" onclick="return okl();">Ok</button>  &nbsp;  &nbsp;
            <button class="btn btn-warning" onclick="return printPagel();"><i class="fas fa-print"></i>Print</button>
        </div>
    </div>
    <br />
</div>

<script>

 


    function SearchDetails() {

        if ($('#Ttin').val() == "" && $('#Cid').val() == "" && $('#Plotno').val() == "" && $('#Thramno').val() == "") {
            swal('Empty Fields', '', 'error');
            $('#Ttin').focus();
            $('#Cid').focus();
            $('#Plotno').focus();
            $('#Thramno').focus();
            return false;
        }

        var Ttin = $('#Ttin').val();
        var Cid = $('#Cid').val();
        var Plotno = $('#Plotno').val();
        var Thramno = $('#Thramno').val();

                $.ajax({
                        type: "GET",
                        url: '@Url.Action("FetchlandOwnershipDetails", "LandFeeDetails")',
                        data: {
                            Ttin: Ttin,
                            Cid: Cid,
                            PlotNo: Plotno,
                            ThramNo: Thramno
                        },
                        dataType: "json",
                    success: function (data) {
                            $('#tbl_body').empty();
                        if (data.length > 0) {
                            //var LandOwnerShipId = data[0].landOwnerShipId;
                            //$('#hdnLandownershipId').val(LandOwnerShipId);

                            //var LandDetailsId = data[0].landDetailId;
                            //$('#hdnLandDetailid').val(LandDetailsId);





                                $.each(data, function (key, value) {
                                    $('#tbl_landetails').show(1000);

                                    $('#tbl_body').append(
                                        '<tr>'
                                        + '<td>' + (key + 1) + '</td>'
                                        + '<td>' + value.ttin + '</td>'
                                        + '<td>' + value.cid + '</td>'
                                        + '<td>' + value.fullName + '</td>'
                                        + '<td>' + value.plotNo + '</td>'
                                        + '<td>' + value.thramNo + '</td>'

                                        + '<td><b><a style="cursor: pointer; color: forestgreen;" title="Select" onclick="return duplicaterecepit(' + value.taxPayerId + ');">View</a></b></td>'
                                        + '<td><b><a style="cursor: pointer; color: forestgreen;" title="Select" onclick="return display(' + value.taxPayerId + ',' + value.landDetailId + ',' + value.landOwnerShipId+');">Select</a></b></td>'

                                        + '</tr>');
                                });
                            } else {
                                $('#tbl_body').append(
                                    '<tr><td colspan="6" style="color: red;">No record found!</td></tr>');
                                swal({
                                    title: 'Please Enter valid Value!',
                                    type: 'error',
                                    confirmButtonText: 'OK'
                                });

                            }

                        },

                        error: function () {
                            alert('error');
                        }
                    });
    }

    function duplicaterecepit(taxpayerId) {
          $.ajax({
                        type: "GET",
                        url: '@Url.Action("FetchTaxDetails", "LandFeeDetails")',
                        data: {
                            TaxPayerId: taxpayerId
                        },
                        dataType: "json",
                    success: function (data) {
                            $('#tbltax').empty();
                        if (data.length > 0) {
                           $.each(data, function (key, value) {
                                    $('#divtax').show(1000);
                               $('#SavingFee').hide(1000);
                                    $('#demandpage').hide(1000);

                                    $('#tbltax').append(
                                        '<tr>'
                                        + '<td>' + (key + 1) + '</td>'
                                        + '<td>' + value.demandNo + '</td>'
                                        + '<td>' + value.taxName + '</td>'
                                        + '<td>' + value.totalAmount + '</td>'


                                        + '<td><b><a style="cursor: pointer; color: forestgreen;" title="Select" onclick="return Recepit(' + value.transactionId +');">View</a></b></td>'

                                        + '</tr>');
                                });
                            } else {

                                swal({
                                    title: 'Payment alreadly Made!',
                                    type: 'error',
                                    confirmButtonText: 'OK'
                                });

                            }

                        },

                        error: function () {
                            alert('error');
                        }
                    });

    }

    function Recepit(transactionId) {

        $.ajax({
                type: "GET",
                url: '@Url.Action("fetchreceiptuser", "LandFeeDetails")',
                data: {
                    TransactionId: transactionId
                },
            success: function (data) {
            console.log(data);
                     $("#lblluser").html(data[0].creatorname);
                     $('#img').hide();
             },
            error: function () {
                    $('#img').hide();
                    alert('Error occured');
     }
 });



         $.ajax({
                type: "GET",
                url: '@Url.Action("LandTransactionFeeRecepit", "LandFeeDetails")',
                data: {
                    TransactionId: transactionId
                },
            success: function (data) {

                $('#divlandtransactionrecepit').show();
                    console.log(data);
                $('#tbllandtransaction').empty();
                if (data.length > 0) {

                    $('#lqrDemandNo').attr('src', `data:image/png;base64,${data[0].qrImage}`);
                    $("#lbllrecepitno").html(data[0].receipt);
                    var today = new Date(data[0].createdOn);
                    var date = ("0" + today.getDate()).slice(-2) + '/' + ("0" + (today.getMonth() + 1)).slice(-2) + '/' + today.getFullYear()
                    $("#lblldate").html(date);
                    $("#lbllthramno").html(data[0].thramNo);


                    $("#lbllname").html(data[0].fullName);
                    $("#lblllcid").html(data[0].cid);
                    $("#lblladdress").html(data[0].caddress);
                    $("#lbllplotno").html(data[0].plotNo);
                    $("#lblllttin").html(data[0].ttin);

                    $("#lblltamount").html(data[0].totalAmount);
                    $.each(data, function (key, value) {
                        $('#tbllandtransaction').append(
                                '<tr>' + '<td>' + (key + 1) + '</td>'
                                + '<td>' + value.taxName + '</td>'

                                + '<td style="text-align:right;">' + value.amount + '</td>'


                                + '</tr>');
                        });
                        $('#img').hide();


                    }
                    else {
                        $('#img').hide();

                    $('#tbllandtransaction').append(
                            '<tr><td colspan="7" style="color: red;">No record found!</td></tr>');
                    }

                },
                    error: function () {
                    $('#img').hide();
                    alert('Error occured');
                    }
                });

    }



    function myFunction() {
        var x = document.getElementById("LandServiceTypeId").value;
        if (x == 9) {
            $('#no').show(1000);
            $('#yes').hide(1000);
        }
        else{
            $('#yes').show(1000);
            $('#no').hide(1000);
        }


    }
    function display(_tayPayerId, landDetailId, landOwnerShipId) {
        $('#SavingFee').toggle(1000);



        $('#divtax').hide(1000);
        $('#divlandtransactionrecepit').hide(1000);

        var taxPayer_id = _tayPayerId;
        $('#hdnTaxpayerId').val(taxPayer_id);

        var landid = landDetailId;
        $('#hdnLandDetailid').val(landid);

        var LandOwnerShipId = landOwnerShipId;
         $('#hdnLandownershipId').val(LandOwnerShipId);
        
    }
    function Save() {



        var myarray = [];
        var LandFeeDetailVM = {};

      LandFeeDetailVM.LandServiceTypeId = parseInt($('#LandServiceTypeId').val());
      LandFeeDetailVM.Amount = parseFloat($('#lblsaamount').val());
      LandFeeDetailVM.Amount = parseFloat($('#lblamount').val());
      LandFeeDetailVM.LandOwnershipId = parseInt($('#hdnLandownershipId').val());
      LandFeeDetailVM.LandDetailId = parseInt($('#hdnLandDetailid').val());
      LandFeeDetailVM.TaxPayerId = parseInt($('#hdnTaxpayerId').val());


        myarray.push(LandFeeDetailVM);
                var json_data = JSON.stringify(myarray);
                console.log(json_data);
                $('#img').show();

            $.ajax({
                type: "POST",
                url: '@Url.Action("SaveLandFeeDetails", "LandFeeDetails")',
                data: json_data,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    $('#img').hide();
                    displaydemand(response);
                    swal("successfully saved!!!");
                    $('#demandpage').toggle(1000);
                    $('#Saving').hide(1000);
                    $('#tbl_readingdetails').hide(1000);


                },
                failure: function () {
                    $('#img').hide();
                    swal('Creation Failed', '', 'error');
                },
                error: function () {
                    $('#img').hide();
                    swal('Error while inserting');
                }
            });
        }


    function Savemajor() {



        var myarray = [];
        var LandFeeDetailVM = {};

      LandFeeDetailVM.LandServiceTypeId = parseInt($('#LandServiceTypeId').val());
        LandFeeDetailVM.ScrutinyFeeAmount = parseFloat($('#lblsfamount').val());
        LandFeeDetailVM.ServiceandAmenitiesfeeAmount = parseFloat($('#lblsaamount').val());
      LandFeeDetailVM.LandOwnershipId = parseInt($('#hdnLandownershipId').val());
      LandFeeDetailVM.LandDetailId = parseInt($('#hdnLandDetailid').val());
      LandFeeDetailVM.TaxPayerId = parseInt($('#hdnTaxpayerId').val());


        myarray.push(LandFeeDetailVM);
                var json_data = JSON.stringify(myarray);
                console.log(json_data);
                $('#img').show();

            $.ajax({
                type: "POST",
                url: '@Url.Action("SavemajorLandFeeDetails", "LandFeeDetails")',
                data: json_data,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    $('#img').hide();
                    displaydemand(response);
                    swal("successfully saved!!!");
                    $('#demandpage').toggle(1000);
                    $('#Saving').hide(1000);
                    $('#tbl_readingdetails').hide(1000);


                },
                failure: function () {
                    $('#img').hide();
                    swal('Creation Failed', '', 'error');
                },
                error: function () {
                    $('#img').hide();
                    swal('Error while inserting');
                }
            });
        }
    //Cancel function
    function CancelRD() {
        $('#SavingFee').hide(1000);

    }




    function displaydemand(TransactionId) {

        $('#img').hide();

        $.ajax({
                type: "GET",
                url: '@Url.Action("PrintUser", "LandFeeDetails")',
                data: {
                    TransactionId: TransactionId
                },
            success: function (data) {
            console.log(data);
                $('#lbluser').html(data[0].creatorname);
                     $('#img').hide();
             },
            error: function () {
                    $('#img').hide();
                    alert('Error occured');
     }
 });

                 $.ajax({
                type: "GET",
                url: '@Url.Action("PrintDemand", "LandFeeDetails")',
                data: {
                    TransactionId: TransactionId
                },
                     success: function (data) {
                         if (data.length > 0) {
                             var today = new Date(data[0].createdOn);
                             var date = ("0" + today.getDate()).slice(-2) + '/' + ("0" + (today.getMonth() + 1)).slice(-2) + '/' + today.getFullYear()
                             $('#demanddate').html(date);


                             $('#idinvoiceno').html(data[0].demandNo);

                             $('#lblname').html(data[0].fullName);

                             $('#lblcid').html(data[0].cid);
                             $('#lblmobile').html(data[0].phoneNo);

                             $('#lblttin').html(data[0].ttin);
                             $('#lblthramno').html(data[0].thramNo);
                             $('#lblplotno').html(data[0].plotNo);


                             $('#qrDemandNo').attr('src', `data:image/png;base64,${data[0].qrImage}`);

                         }
                    $('#tblDemand').empty();
                    $('#img').hide();

                    $.each(data, function (key, value) {
                        $('#tblDemand').append(
                            '<tr>'
                            + '<td>' + (key + 1) + '</td>'
                            + '<td>' + value.taxName + '</td>'
                            + '<td style="text-align:center;">' + value.totalAmount + '</td>'
                            + '</tr>');
                    });
                         $('html,body').animate({
                             scrollTop: $("#demandpage").offset().top
                         }, 'slow');
                    $('#demandDate').val(createdOn);

                    },
                    error: function () {
                        alert('error');
                        $('#img').hide();
                    }

                });
        }
    function printPage() {


        var dataToPrint = document.getElementById("printdemandpage");
        newWin = window.open("");
        newWin.document.write(dataToPrint.outerHTML);
        newWin.print();
        newWin.close();
    }

    function printPagel() {


        var dataToPrint = document.getElementById("dvPrintl");
        newWin = window.open("");
        newWin.document.write(dataToPrint.outerHTML);
        newWin.print();
        newWin.close();
    }
    function okl() {
        $('#divtax').hide(1000);
        $('#divlandtransactionrecepit').hide(1000);

    }
    function ok() {
        $('#SavingFee').hide(1000);
        $('#demandpage').hide(1000);

    }

</script>


