#pragma checksum "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "dc411d1e32d1fb854c5458f9cba7dc024ffd46a8"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_Payment_Views_BfsFailedOnlineTransactionDetails_Index), @"mvc.1.0.view", @"/Areas/Payment/Views/BfsFailedOnlineTransactionDetails/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "D:\TT\Finalarms\ARMS\Areas\_ViewImports.cshtml"
using ARMS;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\TT\Finalarms\ARMS\Areas\_ViewImports.cshtml"
using ARMS.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
using CORE_BOL;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"dc411d1e32d1fb854c5458f9cba7dc024ffd46a8", @"/Areas/Payment/Views/BfsFailedOnlineTransactionDetails/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"9b4a8197006c533ca3077e7e53fa27a725fee456", @"/Areas/_ViewImports.cshtml")]
    public class Areas_Payment_Views_BfsFailedOnlineTransactionDetails_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<BfsModel>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/dist/img/loader.gif"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("style", new global::Microsoft.AspNetCore.Html.HtmlString("width: 100px; height: 100px;"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 3 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
  
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n\r\n<div class=\"dialog-background\" style=\"display:none\" id=\"img\">\r\n    <div class=\"dialog-loading-wrapper\">\r\n        <span class=\"dialog-loading-icon\">");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "dc411d1e32d1fb854c5458f9cba7dc024ffd46a84522", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"</span>
    </div>
</div>


<div class=""content-header"">
    <div class=""container-fluid"">
        <div class=""row mb-2"">
            <div class=""col-sm-6"">
                <h1 class=""m-0 text-dark""></h1>
            </div>
            <div class=""col-sm-6"">
                <ol class=""breadcrumb float-sm-right"">
                    <li class=""breadcrumb-item active"">BFS Transaction Detail</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<div class=""card card-info"">
");
#nullable restore
#line 32 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
     if (TempData["msg"] != null)
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <div class=\"alert alert-success alert-dismissible\">\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\">&times;</button>\r\n            <h5><i class=\"icon fas fa-check\"></i> Success!</h5>\r\n            <p>");
#nullable restore
#line 37 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
          Write(TempData["msg"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n        </div>\r\n");
#nullable restore
#line 39 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"    <div class=""card-header"">
        <h3 class=""card-title"">BFS Failed Online Transaction Detail</h3>
    </div>
    <div class=""card-body"">
        <div class=""text-danger""></div>
        <div class=""form-group row"">
            <div class=""input-group d-flex justify-content-center col-5"">
                <label class=""col-sm-4 col-form-label"">Consumer No:</label>
                <input id=""searchId"" class=""form-control col-6"" />
            </div>
            <div class=""col-sm-2"">
                <button type=""button"" class=""btn btn-outline-primary"" onclick=""return Search();"">View</button>
            </div>
        </div>
    </div>
</div>

<!--Details-->
<div class=""card card-info"" id=""tbl_fproperty"" style=""display: none;"">
    <div class=""card-header"">
        <h3 class=""card-title"">Demand Details</h3>
    </div>
    <input type=""hidden"" id=""bfsTransactionDetailId"" />
    <div class=""card-body"">

        <table id=""example1"" class=""table table-bordered table-striped "">
       ");
            WriteLiteral(@"     <thead style=""background-color:mediumaquamarine"">

                <tr>
                    <th>Sl No</th>
                    <th>Demand No</th>
                    <th>Demand Generated</th>
                    <th>Demand Amount</th>
                    <th>Exemption Amount</th>
                    <th>Total Amount</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id=""tbl_body"">
            </tbody>
        </table>
    </div>
    <div class=""input-group col-6"">
        <label class=""col-sm-3 col-form-label"">Payment Date <span style=""font-weight: bold; color: red;"">*</span></label>
        <div class=""col-sm-4"">
            <input class=""form-control"" id=""paymentdate"" type=""date"" required />
            <span class=""text-danger"" id=""pdate""></span>
        </div>
        <div class=""input-group-append col-2"">
            &nbsp;  <input id=""btnProceed"" type=""button"" value=""Proceed"" class=""btn btn-primary"" onclick=""return GetDemand");
            WriteLiteral(@"Detail();"" />
        </div>
    </div>
    <br />
</div>
<div class=""card card-info"" style=""display:none;"" id=""dvDemandDetail"">
    <div class=""card-header"">
        <h3 class=""card-title"">Demand Details View</h3>
    </div>
    <div class=""card-body table-responsive"">
        <table id=""exampleDemandDetail"" class=""table table-bordered table-striped"">
            <thead style=""background-color:mediumaquamarine"">

                <tr>
                    <th>#</th>
                    <th>Demand No </th>
                    <th>Tax Name </th>
                    <th>Demand Amount </th>
                    <th>Exemption Amount</th>
                    <th>Penalty Amount</th>
                    <th>Total Amount</th>
");
            WriteLiteral(@"                </tr>
            </thead>
            <tbody id=""tbl_body2"">
            </tbody>
        </table>
        <hr />
        <div class=""row"">
            <div class=""input-group d-flex justify-content-center col-6"">
                <input type=""hidden"" id=""hdnGrandTotalAmount""");
            BeginWriteAttribute("value", " value=\"", 4336, "\"", 4344, 0);
            EndWriteAttribute();
            WriteLiteral(" />\r\n");
            WriteLiteral("\r\n                <input type=\"hidden\" id=\"hdnReceiptId\"");
            BeginWriteAttribute("value", " value=\"", 4487, "\"", 4495, 0);
            EndWriteAttribute();
            WriteLiteral(@" />

            </div>

            <div class=""input-group d-flex justify-content-center col-6"">
                <div class=""input-group-append col-3"">
                    &nbsp;  <input id=""btnProceedToPay"" type=""button"" value=""Proceed To Pay"" class=""btn btn-primary"" />
                </div>
                &nbsp;   &nbsp;  &nbsp;   &nbsp;
                <div class=""input-group-append col-2"">
                    &nbsp;   &nbsp;  <input id=""btnCancelProceed"" type=""button"" value=""Cancel"" class=""btn btn-warning"" />
                </div>
            </div>
        </div>
    </div>
</div>

<hr />
<div id=""dvPaymentModeDetail"" style=""display:none;"">

    <TABLE id=""tblPaymentDetail"" width=""100%"" border=""1"" class=""table table-bordered table-striped"">
        <thead style=""background-color:mediumaquamarine"">
            <tr>
                <th style=""width:150px"">Payment Mode</th>
                <th style=""width:150px"">Amount</th>
                <th style=""width:150px"">Bank</th>
  ");
            WriteLiteral("              <th style=\"width:150px\">Payment Mode No</th>\r\n                <th style=\"width:150px\">Payment Mode Date</th>\r\n                <th style=\"width:150px\"></th> ");
            WriteLiteral("\r\n            </tr>\r\n        </thead>\r\n        <tbody id=\"pbody\">\r\n        </tbody>\r\n    </TABLE>\r\n\r\n    <TABLE>\r\n        <tr>\r\n            <th style=\"width:240px\">\r\n");
            WriteLiteral("                &nbsp;  &nbsp; <b>Net Amount:</b>\r\n            </th>\r\n            <th style=\"width:150px\">\r\n                <input type=\"text\" id=\"hdnPaymentAmount\" class=\"form-control\"");
            BeginWriteAttribute("value", " value=\"", 6164, "\"", 6172, 0);
            EndWriteAttribute();
            WriteLiteral(" readonly />\r\n                <input type=\"text\" id=\"hdnTransactionTypeId\" class=\"form-control\"");
            BeginWriteAttribute("value", " value=\"", 6268, "\"", 6276, 0);
            EndWriteAttribute();
            WriteLiteral(@" hidden />

            </th>
        </tr>
    </TABLE>


    <hr />
    <div class=""input-group d-flex justify-content-center col-4"">
        <div class=""input-group-append col-2"">
            &nbsp;  <input id=""btnPay"" type=""button"" value=""Pay"" class=""btn btn-primary"" />
        </div>

        <div class=""input-group-append col-2"">
            &nbsp;   &nbsp;  <input id=""btnCancelPayment"" type=""button"" value=""Cancel"" class=""btn btn-warning"" />
            &nbsp;   &nbsp;  ");
            WriteLiteral(@"
        </div>
    </div>

</div>
<script>
        function hideAll() {
            $('#tbl_fproperty').hide(1000);
            $('#tbl_details').hide(1000);
            $('#Recepit').hide(1000);
        }

    function Cancel() {
        $('#tbl_fproperty').hide(1000);
        $('#tbl_details').hide(1000);
    }

    function Cancel1() {
        $('#tbl_details').hide(1000);
    }

    function Search() {
        if ($('#searchId').val() == """") {
           swal('Empty Fields', 'Please Enter Valid Value', 'error');
            $('#searchId').focus();
                return false;
            }

        var searchId = $('#searchId').val();
        //var tranId = $('#tranIdInput').val();

            $.ajax({
                type: ""GET"",
                url: '");
#nullable restore
#line 213 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
                 Write(Url.Action("Search", "BfsFailedOnlineTransactionDetails"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                data: {
                    search: searchId,
                    //transactionId: tranId
                },
                dataType: ""json"",
                success: function (data) {

                    $('#tbl_body').empty();
                    if (data.length > 0) {
                        //var CreatedOn = data[0].createdOn;
                        //var Month = Date.getMonth(CreatedOn);

                            $('#tbl_fproperty').show(1000);
                        $.each(data, function (key, value) {
                            const e = new Date(value.createdOn);
                            const y = new Date(value.createdOn);
                            let month = e.toLocaleString('en-us', { month: 'long' });
                            let year = y.getFullYear();
                            //let year = e.toLocaleString('en-us', { year: 'long' });
                                $('#tbl_body').append(
                                    '<tr>'
      ");
            WriteLiteral(@"                              + '<td>' + (key + 1) + '</td>'
                                    + '<td>' + value.demandNo + '</td>'
                                    + '<td>' + month + ', ' + year + '</td>'
                                    + '<td>' + value.demandAmount + '</td>'
                                    + '<td>' + value.exemptionAmount + '</td>'
                                    + '<td>' + value.totalAmount + '</td>'
                                    + '<td><input id=""chk1_' + key + '"" type=""checkbox"" value=""' + value.demandNoId + '"" class""=checkbox"" /> <label for=chk1_' + key + '></label>'
                                    + '</tr>');
                                });


                    //} else if (data[0].bfsDebitAuthCode == '00') {
                    //    swal(""Payment already made. kamsamidha"");
                    //    return false;

                    } else {
                        $('#tbl_fproperty').show(1000);
                        $('#tbl_body').");
            WriteLiteral(@"append(
                            '<tr><td colspan=""4"" style=""color: red;"">No record found!</td></tr>');

                    }



                },

            });

    }
    function GetDemandDetail() {
        //$('#img').show();
        var selected = new Array();
        var ids; var paymentdate;
        //Reference the CheckBoxes and insert the checked CheckBox value in Array.
        $(""#example1 input[type=checkbox]:checked"").each(function () {
            selected.push(this.value);
        });
        
        //Display the selected CheckBox values.
        if (selected.length > 0) {
            ids = selected.join("","");
        }
        else {
            swal('Please select at least one Demand No to pay.!');
            $('#img').hide();
            return false;
        }
        if ($('#paymentdate').val() == '') {
            swal('Select Payment Date!');
            return false;
            $('#img').hide();
        }
");
            WriteLiteral("\r\n        $.ajax({\r\n                type: \"GET\",\r\n                url: \'");
#nullable restore
#line 305 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
                 Write(Url.Action("GetDemandDetail", "BfsFailedOnlineTransactionDetails"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                data: {
                    id: ids,
                    paymentdate: $('#paymentdate').val()
                    
                },
            success: function (data) {
              ;
                $(""#dvPaymentModeDetail"").hide(1000);
                console.log(data);

                    //Changed from == 0 to >0
                    if (data.length > 0) {
                        $(""#dvDemandDetail"").show(1000);

                        $(""#hdnPaymentAmount"").val(data[0].grandTotalAmount );
                        $(""#hdnTransactionTypeId"").val(data[0].transactionTypeId);
                        //$(""#hdnGrandPenaltyAmount"").val(data[0].totalPenaltyAmount);
                        var tpenalty = 0;
                        var gttlamt = 0;
                        var dttlamt = 0;

                        $('#tbl_body2').empty();
                        $.each(data, function (key, value) {
                            var exmpamt = value.exemptionAmount;
     ");
            WriteLiteral(@"                       if (value.exemptionAmount == null) {
                                exmpamt = 0;
                            }
                            var ttlamt = 0;
                            ttlamt = value.totalAmount + value.totalPenaltyAmount;
                            tpenalty += value.totalPenaltyAmount;

                            dttlamt += value.demandAmount;

                            gttlamt += ttlamt;

                            $(""#hdnGrandTotalAmount"").val(gttlamt.toFixed(0));

                            const e = new Date(value.createdOn);
                            let month = e.toLocaleString('en-us', { month: 'long' });


                                $('#tbl_body2').append(
                                    '<tr>' + '<td>' + (key + 1) + '</td>'
                                    + '<td style=""display:none;""><input id=""demandId_' + key + '"" type=""hidden"" value=""' + value.demandId + '"" /><input id=""transactionId_' + key + '"" type=""hidden"" value=""'");
            WriteLiteral(@" + value.transactionId + '"" /><input id=""taxId_' + key + '"" type=""hidden"" value=""' + value.taxId + '"" /><input id=""financialYearId_' + key + '"" type=""hidden"" value=""' + value.financialYearId + '"" /><input id=""calendarYearId_' + key + '"" type=""hidden"" value=""' + value.calendarYearId + '"" /><input id=""totalAmount_' + key + '"" type=""hidden"" value=""' + value.totalAmount + '"" /></td>'
                                    + '<td>' + value.demandNo + '</td>'
                                    + '<td>' + value.taxName + '</td>'
                                    + '<td>' + value.demandAmount + '</td>'
                                    + '<td>' + exmpamt + '</td>'
                                    + '<td>' + value.totalPenaltyAmount.toFixed(2) + '</td>'
                                    + '<td>' + ttlamt.toFixed(2) + '</td>'
                                    + '<td style=""display:none;"">'
                                    + '<input id=""chkDemand_' + key + '"" type=""checkbox"" value=""' + value.demandId");
            WriteLiteral(@" + '"" class""=checkbox"" checked /> <label for=chkDemand_' + key + '> Select </label>'
                                    + '</td>'
                                    + '</tr>');

                        });
                        $('#img').hide();
                        $('#tbl_body2').append('<tr>' + '<td colspan=""3"" align=""Right"" ><b> Total : </b></td><td>' + dttlamt +'</td><td></td><td><b>' + tpenalty.toFixed(2) + '</b></td> </td>' +
                            '<td colspan=""1"" style=""font-weight:bold;""> <label id=""lblGrandTotal"" value="""" ></label></td>'
                            + '</tr>');

                        $('html,body').animate({
                            scrollTop: $(""#dvDemandDetail"").offset().top
                        }, 'slow');

                        $(""#lblGrandTotal"").html($(""#hdnGrandTotalAmount"").val());

                    }
                    else {
                        $('#tbl_body2').empty();
                        $('#img').hide();
             ");
            WriteLiteral(@"           $(""#dvDemandDetail"").show(1000);
                        $('#tbl_body2').append(
                            '<tr><td colspan=""7"" style=""color: red;"">No record found!</td></tr>');
                    }

                },
                    error: function () {
                    $('#img').hide();
                    alert('Error occured');
                    }
        });

         //        }

         //    },
         //    error: function () {
         //        $('#img').hide();
         //        alert('Error occured');
         //    }
         //});
        //

    }

    $('#btnProceedToPay').on('click', function () {

        $('#dvPaymentModeDetail').show(1000);


        $(""#hdnPaymentAmount"").val($(""#lblGrandTotal"").html());

        var rowCount = $('#tblPaymentDetail').find('tr').length;
        if (rowCount == 1) {
            //addMoreRow();
            //alert(rowCount);

            var rowCount = $('#tblPaymentDetail').find('tr').length;
");
            WriteLiteral(@"
            var str = ""<tr> <td> <select id=paymentModeId_"" + rowCount + "" class='clspaymentmode form-control select2' ></select></td>     <td style='width: 150px'><input id=paymentModeAmount_"" + rowCount + "" type='number' value='"" + $(""#lblGrandTotal"").html() + ""' class='form-control clsTotalAmount' onblur='findTotal()' /></td>   <td><select id=bankBranchId_"" + rowCount + "" class='clsBankBranch form-control select2' ></select></td>  <td  style='width: 150px'><input id=paymentModeNo_"" + rowCount + "" type='text' class='clsPaymentModeNo form-control' /></td>   <td> <input id=paymentModeDate_"" + rowCount + "" type='date' class='clsPaymentModeNoDate form-control' placeholder='Payment Mode Date' /></td>       <td style=width: 150px><INPUT type=button value='Delete Row' onclick=Remove(this) class='btn btn-danger fa-trash'/></td>     </tr>"";
            $('#pbody').append(str);
            getPaymentMode(rowCount);
            getBankBranch(rowCount);

        }
        else {
            $(""#paymentModeAmou");
            WriteLiteral(@"nt_1"").val($(""#lblGrandTotal"").html());
            findTotal();

        }
        $('#img').hide();

        //$('html,body').animate({
        //    scrollTop: $(""#dvPaymentModeDetail"").offset().top
        //}, 'slow');
    });

    function findTotal() {

        var arr = document.getElementsByClassName('clsTotalAmount');
        var tot = 0;
        for (var i = 0; i < arr.length; i++) {
            if (parseFloat(arr[i].value))
                tot += parseFloat(arr[i].value);
        }
        $(""#hdnPaymentAmount"").val(tot);
    }

     function getPaymentMode(key) {

        $.ajax({
                type: ""POST"",
                url: '");
#nullable restore
#line 448 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
                 Write(Url.Action("GetPaymentMode", "BfsFailedOnlineTransactionDetails"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                data: {
                },
                success: function (data) {

                    console.log(data);
                    $('#paymentModeId_' + key).empty();
                    if (data.length > 0) {
                    for (var i = 0; i < data.length; i++) {
                        var newOption = $('<option value=' + data[i].value + '> '
                            + data[i].text
                        + ' </option>');
                        $('#paymentModeId_' + key).append(newOption);
                    }
                }
                else {
                    //$('#img').hide();
                }

                },
                error: function () {
                    //$('#img').hide();
                    alert('Error occured');
                }
                });

    }
    function getBankBranch(key) {

        $.ajax({
                type: ""POST"",
                url: '");
#nullable restore
#line 479 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
                 Write(Url.Action("GetBankBranch", "BfsFailedOnlineTransactionDetails"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                data: {
                    //AssetAttributeId: parseInt(assetattribute_id)
                },
                success: function (data) {

                    console.log(data);
                    $('#bankBranchId_' + key).empty();
                    if (data.length > 0) {
                    for (var i = 0; i < data.length; i++) {
                        var newOption = $('<option value=' + data[i].value + '> '
                            + data[i].text
                        + ' </option>');
                        $('#bankBranchId_' + key).append(newOption);
                    }
                }
                else {
                    //$('#img').hide();
                }

                },
                error: function () {
                    //$('#img').hide();
                    alert('Error occured');
                }
                });

    }

    function addMoreRow() {
        var rowCount = $('#tblPaymentDetail').find('tr').length;
  ");
            WriteLiteral(@"      var str = ""<tr> <td> <select id=paymentModeId_"" + rowCount + "" class='clspaymentmode form-control select2' ></select></td>     <td style='width: 150px'><input id=paymentModeAmount_"" + rowCount + "" type='number' class='form-control clsTotalAmount'  onblur='findTotal()'/></td>   <td><select id=bankBranchId_"" + rowCount + "" class='clsBankBranch form-control select2' ></select></td>  <td  style='width: 150px'><input id=paymentModeNo_"" + rowCount + "" type='text' class='clsPaymentModeNo form-control' /></td>   <td> <input id=paymentModeDate_"" + rowCount + "" type='date' class='clsPaymentModeNoDate form-control' placeholder='Payment Mode Date' /></td>       <td style=width: 150px><INPUT type=button value='Delete Row' onclick=Remove(this) class='btn btn-danger fa-trash'/></td>     </tr>"";

        $('#pbody').append(str);
        getPaymentMode(rowCount);
        getBankBranch(rowCount);
}

    function Remove(button) {
        //Determine the reference of the Row using the Button.
        var row = $(b");
            WriteLiteral(@"utton).closest(""TR"");
        //var name = $(""TD"", row).eq(0).html();
        if (confirm(""Are you sure want to delete.?"")) {
            //Get the reference of the Table.
            var table = $(""#tblPaymentDetail"")[0];
            //Delete the ITempDataDictionaryable row using it's Index.


            var rowCount = $('#tblPaymentDetail').find('tr').length;
            if (rowCount > 2) {
                table.deleteRow(row[0].rowIndex);
            }
            else {
                swal(""You can not delete all rows"");
                return false;
            }
        }
    };

    $('#btnPay').on('click', function () {
        //alert($(""#hdnTransactionTypeId"").val());
        if ($('.clspaymentmode').val() == 0) {
            swal(""Please Select Payment Mode.!"");
            return false;
        }
        if ($('.clsBankBranch').val() == 0) {
            swal(""Please Select Bank.!"");
            return false;
        }
        if ($('.clsPaymentModeNo').val() == 0) {");
            WriteLiteral(@"
            swal(""Please Enter Payment Mode.!"");
            return false;
        } 
        if ($('.clsPaymentModeNoDate').val() == 0) {
            swal(""Please select Payment Mode Date.!"");
            return false;
        }
        //if ($('.clspaymentmode').val() == 2 && ($('.clsBankBranch').val() == 0 || $('.clsPaymentModeNo').val() == """" || $('.clsPaymentModeNoDate').val() == """" ) ){
        //    swal(""Please select bank branch ,cheque no and check date.!"");
        //    return false;
        //}

        if (($(""#hdnGrandTotalAmount"").val() )!= $(""#hdnPaymentAmount"").val()) {
            swal(""Payment amount does not match with the demand amount, please check.!"");
            return false;
        }
        //alert($('.clspaymentmode').val());
        var r = confirm(""Are you sure you want to pay.?"");
        if (r == true) {

        } else {
            return false;
        }


        //***********************ids start************************
        var selectedDema");
            WriteLiteral(@"nd = new Array();
        var ids;

        //Reference the CheckBoxes and insert the checked CheckBox value in Array.
        $(""#exampleDemandDetail input[type=checkbox]:checked"").each(function () {
            selectedDemand.push(this.value);
        });

        //Display the selected CheckBox values.
        if (selectedDemand.length > 0) {
            ids = selectedDemand.join("","");
        }
        //**********************ids end****************
        $('#img').show();
         $.ajax({
                type: ""POST"",
                 url: '");
#nullable restore
#line 591 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
                  Write(Url.Action("CheckDuplicatePayment", "BfsFailedOnlineTransactionDetails"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                data: {
                  id: ids
                      },
                success: function (data) {

                    console.log(data);
                    //alert(ids);
                    if (data.length > 0) {
                        $('#img').hide();
                        $('MakePayment').hide();
                        swal(""Payment already made the payment for the demand (s) you selected.!"");
                        return false;
                    }
                    else {

                        //console.log(JSON.stringify(PMarray));
                       //************************PAYMENT MODE LOOP START**********************
                        var myarray = [];
                        //for (i = 0; i < $(""#exampleDemandDetail TBODY TR"").length - 1; i++) {

                            var ledgobj = {};
                        ledgobj.Ids = ids;
                        ledgobj.PaymentDate = $('#paymentdate').val();
                        /");
            WriteLiteral(@"/ledgobj.ReceiptId = parseFloat($(""#demandId_"" + i).val());
                            myarray.push(ledgobj);
                        console.log(JSON.stringify(myarray));
                       //************************DEMAND LOOP START**********************

                        $.ajax({
                            contentType: ""application/json; charset=utf-8"",
                            dataType: ""json"",
                            url: '");
#nullable restore
#line 623 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
                             Write(Url.Action("CreateLedger", "BfsFailedOnlineTransactionDetails"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                            type: ""POST"",
                            data: JSON.stringify(myarray),
                            success: function (r) {
                                if (r > 0) {
                                   // MakePayment(r,20);
                                    //MakePaymentForWater(r);
                                    //************************PAYMENT MODE LOOP START**********************
                                    var PMarray = []; var i = 1;
                                    $('#tblPaymentDetail > tbody  > tr ').each(function () {
                                        var PMobj = {};
                                        if (parseFloat($(""#paymentModeAmount_"" + i).val()) > 0) {
                                            PMobj.PaymentModeId = parseInt($(""#paymentModeId_"" + i).val());
                                            PMobj.Amount = parseFloat($(""#paymentModeAmount_"" + i).val());
                                            PMobj.BankB");
            WriteLiteral(@"ranchId = parseInt($(""#bankBranchId_"" + i).val());
                                            PMobj.PaymentModeNo = ($(""#paymentModeNo_"" + i).val());
                                            PMobj.PaymentDate = $('#paymentdate').val();
                                            if ($(""#paymentModeId_"" + i).val() == 1) {
                                                PMobj.PaymentModeDate = ""1900-01-01"";
                                            }
                                            else {
                                                PMobj.PaymentModeDate = ($(""#paymentModeDate_"" + i).val());
                                            }
                                            PMobj.ReceiptId = parseInt(r);
                                            PMarray.push(PMobj);
                                        }

                                        i = i + 1;
                                    });
                                 //   alert('lt generated');
         ");
            WriteLiteral(@"                           console.log(PMarray);
                                                    $.ajax({
                                                        contentType: ""application/json; charset=utf-8"",
                                                        dataType: ""json"",
                                                        url: '");
#nullable restore
#line 657 "D:\TT\Finalarms\ARMS\Areas\Payment\Views\BfsFailedOnlineTransactionDetails\Index.cshtml"
                                                         Write(Url.Action("CreatePaymentLedger", "BfsFailedOnlineTransactionDetails"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
                                                        type: ""POST"",
                                                        data: JSON.stringify(PMarray),
                                                        success: function (r2) {
                                                            if (r2 > 0) {

                                                                //alert($(""#hdnTransactionTypeId"").val());
                                                                //MakePayment(r2, $(""#hdnTransactionTypeId"").val());
                                                                //MakePaymentForWater(r2,19);
                                                                swal(""Payment saved successfully."");
                                                                $('#paymentModeId_1').val(0).trigger('change')
                                                                $('#bankBranchId_1').val(0).trigger('change')
                                                        ");
            WriteLiteral(@"        $('#paymentModeNo_1').val('');
                                                                $('#paymentModeDate_1').val('');
                                                                $('#paymentdate').val('');
                                                                $('#tbl_fproperty').hide(1000);
                                                                $(""#dvDemandDetail"").hide(1000);
                                                                $('#dvPaymentModeDetail').hide(1000);
                                                                $('#img').hide();
                                                                
                                                            }
                                                            else {
                                                                alert(""Error saving payment details.!"");
                                                                $('#img').hide();
                           ");
            WriteLiteral(@"                                 }
                                                        }
                                                      });

                                    setTimeout(function () {
                                        $('#img').hide();
                                        $('.alert').fadeOut(1000);
                                        //location.reload();
                                    }, 5000);
                                }
                                else {
                                    $('#img').hide();
                                    alert(""Error saving details, please try by logging again."");
                                }
                            }
                        });
                           //************************DEMAND LOOP END**********************
                    }
                 },
                 error: function () {
                     $('#img').hide();
                     alert('Erro");
            WriteLiteral(@"r occured');
                 }

             });
    });
        function printPages() {
            var dataToPrint = document.getElementById(""print"");
            newWin = window.open("""");
            newWin.document.write(dataToPrint.outerHTML);
            newWin.print();
            newWin.close();
        }
</script>


");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<BfsModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
